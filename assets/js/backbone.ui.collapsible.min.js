/*! backbone.ui.collapsible 28-02-2014 */
!function(a,b){var c="undefined"!=typeof APP&&"undefined"!=typeof APP.View,d=c?APP.View:b.View,e=d.extend({options:a.extend({},d.prototype.options,{itemEl:"section",itemTitle:"h2",itemContent:"p",maxWidth:"768px",collapsible:{toggle:!0}}),events:{"click .ui-collapsible-title":"_collapsible_toggle"},initialize:function(){return a.bindAll(this,"_collapsible_toggle"),c||$(this.el).unbind(),this.on("preRender",this._collapsible_preRender),this.on("postRender",this._collapsible_postRender),mqa&&mqa.on("devicewidth",a.bind(this._collapsible_calculate)),d.prototype.initialize.apply(this,arguments)},render:function(){return $(this.el).addClass("ui-collapsible"),c?d.prototype.render.apply(this,arguments):(this.trigger("preRender"),this.trigger("postRender"),void 0)},_collapsible_preRender:function(){},_collapsible_postRender:function(){$(this.el).find(this.options.itemEl).addClass("ui-collapsible-item"),$(this.el).find(this.options.itemTitle).addClass("ui-collapsible-title"),$(this.el).find(this.options.itemContent).addClass("ui-collapsible-content"),this.options.maxWidth||$(this.el).addClass("compact")},_collapsible_toggle:function(a){a.preventDefault(),a.stopPropagation();var b=$(a.target).closest(this.options.itemEl),c=$(a.target).closest(this.options.itemTitle),d=this.options.collapsible.toggle?"toggleClass":"addClass";c[d]("active"),c.closest(this.options.itemEl).siblings().find(this.options.itemTitle).removeClass("active"),b.find(this.options.itemContent)[d]("active").focus(),b.siblings().find(this.options.itemContent).removeClass("active")},_collapsible_calculate:function(a){console.log("devicewidth",a),a<=this.options.maxWidth?$(this.el).addClass("compact"):$(this.el).removeClass("compact")}});a.isUndefined(b.UI)&&(b.UI={}),b.UI.Collapsible=e,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=e:"function"==typeof define&&define.amd&&define([],function(){return e}),"object"==typeof window&&"object"==typeof window.document&&(window.Backbone=b,"undefined"!=typeof APP&&(a.isUndefined(APP.UI)||a.isUndefined(APP.UI.Collapsible))&&(APP.UI=APP.UI||{},APP.UI.Collapsible=b.UI.Collapsible,window.APP=APP))}(this._,this.Backbone);